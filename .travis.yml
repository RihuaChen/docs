language: node_js
node_js:
- '12'
before_install:
- MESSAGE=$(git log --format=%B -n 1 $TRAVIS_COMMIT)
- echo $TRAVIS_COMMIT
- echo ${MESSAGE}
install:
- yarn
test: true
script:
- yarn build
# cache: yarn
after_success:
- MESSAGE=$(git log --format=%B -n 1 $TRAVIS_COMMIT)
- cd dist
- cp index.html 404.html
- echo GH_TOKEN:$GH_TOKEN
- sed -i "s/GH_TOKEN:\"$GH_TOKEN\"\,/ /g" umi.js
deploy:
  provider: pages
  skip_cleanup: true
  github_token: "$GH_TOKEN"
  on:
    branch: main
  repo: RihuaChen/docs
  target_branch: gh-pages
  local_dir: dist
env:
  global:
    secure: rndBumoSMM39MU/PrJUqoAR7z/Db2t5wI58jA2MCYhKCyT09+JsDfIpZRxdOA3hb4T0wc5HWn/4HKhAcC5pEm343Qk/ttf6CZvVPdxL4c+WeqXhiVCMxOy2JIxLtb2+B4ZfmKMSUBp0VfeTsyYmgFN6Ti98oY1cmdUuX8axnQil39evWXFtwMgd5tSnQCgTwzWf186hPwpVOTlPIFzFqQOAgM+JEWtDq6+mqoEwwUnul1G1z+cfrLGwmlSDfpQTnlPF0JnKpyC4z2PNwVYmgYTDOZnFFPxwRxxNu4Zwz3R/RaW2nbOJwy0ZvNUkelOBIR+SOpWO9jI7Hbf3ruVS0vX7dT0DTDa7bjQmmHeysXhIUo742HDre+8hUYFpwegnzVatvCacPwuN/K+4OxLk0oxuO90hcFAb+cO9lvYPa6Dyadv2HOhX5SEakm2wDdsQXqBuCjuzAjZzjJComeCRtwXNvpDi+qfGjOVasoWOWh3y1hpeyS5TklnmsYthmHpWF4hbtF4dHPveWDFmyyK6Y+/ODkvxsTOCCbVcccQIGKuA32uvZfN5V2OrzaVexJCBatnJR7qiWoSN2iuZFM40/qnXdly5g3rrmOXOfPvCyryFlekEXpd17HdaV9b1h/QwAeFjJxPsMGq9oaLal5M5A3X8k9WxbCU8D2fGuNNyNglg=